# First create employees for leaders
# @name CreateEmployeeForCompany
## TEST-EXPECT-STATUS: [201]
POST http://localhost:5223/api/employees
Content-Type: application/json

{
  "title": "Ing.",
  "fullName": "Robert Dvořák",
  "email": "robert.dvorak@test.com",
  "phone": "+421 900 000 012"
}

###

# @name CreateCompanyForDivisions
## TEST-EXPECT-STATUS: [201]
## TEST-HAS-BODY
POST http://localhost:5223/api/companies
Content-Type: application/json

{
  "name": "Company For Divisions Test",
  "code": "CFD001",
  "leaderId": {{CreateEmployeeForCompany.response.body.$.id}}
}

###

# @name CreateEmployeeForDivision
## TEST-EXPECT-STATUS: [201]
POST http://localhost:5223/api/employees
Content-Type: application/json

{
  "title": "Mgr.",
  "fullName": "Veronika Bednárová",
  "email": "veronika.bednarova@test.com",
  "phone": "+421 900 000 013"
}

###

# @name CreateDivision
## TEST-EXPECT-STATUS: [201]
## TEST-HAS-BODY
POST http://localhost:5223/api/divisions
Content-Type: application/json

{
  "name": "Test Division Flow",
  "code": "TDF001",
  "companyId": {{CreateCompanyForDivisions.response.body.$.id}},
  "leaderId": {{CreateEmployeeForDivision.response.body.$.id}}
}

###

# @name GetDivisionById
## TEST-EXPECT-STATUS: [200]
GET http://localhost:5223/api/divisions/{{CreateDivision.response.body.$.id}}

###

# @name CreateEmployeeForProject
## TEST-EXPECT-STATUS: [201]
POST http://localhost:5223/api/employees
Content-Type: application/json

{
  "title": "Bc.",
  "fullName": "Marek Polák",
  "email": "marek.polak@test.com",
  "phone": "+421 900 000 014"
}

###

# @name CreateProject
## TEST-EXPECT-STATUS: [201]
## TEST-HAS-BODY
POST http://localhost:5223/api/projects
Content-Type: application/json

{
  "name": "Test Project Flow",
  "code": "TPF001",
  "divisionId": {{CreateDivision.response.body.$.id}},
  "leaderId": {{CreateEmployeeForProject.response.body.$.id}}
}

###

# @name CreateEmployeeForDepartment
## TEST-EXPECT-STATUS: [201]
POST http://localhost:5223/api/employees
Content-Type: application/json

{
  "title": "Ing.",
  "fullName": "Simona Gašparová",
  "email": "simona.gasparova@test.com",
  "phone": "+421 900 000 015"
}

###

# @name CreateDepartment
## TEST-EXPECT-STATUS: [201]
## TEST-HAS-BODY
POST http://localhost:5223/api/departments
Content-Type: application/json

{
  "name": "Test Department Flow",
  "code": "TDEF001",
  "projectId": {{CreateProject.response.body.$.id}},
  "leaderId": {{CreateEmployeeForDepartment.response.body.$.id}}
}

###

# @name CreateEmployee
## TEST-EXPECT-STATUS: [201]
## TEST-HAS-BODY
POST http://localhost:5223/api/employees
Content-Type: application/json

{
  "title": "Mgr.",
  "fullName": "Jana Mrázová",
  "email": "jane.smith@testflow.com",
  "phone": "+421 111 222 333",
  "departmentId": {{CreateDepartment.response.body.$.id}}
}
